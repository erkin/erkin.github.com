<!DOCTYPE html>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8"/>
    <meta name="title"
          content="Portable Scheme"/>
    <meta name="description"
          content="Writing portable Scheme programs"/>
    <meta name="keywords"
          content="Scheme, Lisp, Guile, cond-expand, portable Scheme, Scheme features"/>

    <meta name="viewport"
          content="width=device-width, initial-scale=1, user-scalable=yes"/>

    <link rel="canonical"
          href="https://erkin.party/scheme/portable/"/>

   <!-- Favicon stuff -->
    <link href="/images/favicons/apple-touch-icon.png"
          rel="apple-touch-icon" sizes="180x180"/>
    <link href="/images/favicons/favicon-32x32.png"
          rel="icon" type="image/png" sizes="32x32"/>
    <link href="/images/favicons/favicon-16x16.png"
          rel="icon" type="image/png" sizes="16x16"/>
    <link href="/images/favicons/site.webmanifest"
          rel="manifest"/>
    <link href="/images/favicons/safari-pinned-tab.svg"
          rel="mask-icon" color="#6e6e6e"/>
    <link href="/images/favicons/favicon.ico"
          rel="shortcut icon"/>

    <meta name="msapplication-TileColor"
          content="#000000"/>
    <meta name="msapplication-config"
          content="/images/favicons/browserconfig.xml"/>
    <meta name="theme-color"
          content="#000000"/>

    <!-- For rainbow parens -->
    <link rel="stylesheet" type="text/css" href="/syntax/syntax.css"/>
    <!-- Uses native fonts only! :-) -->
    <link rel="stylesheet" type="text/css" href="/style.css"/>

    <title>Writing portable Scheme programs</title>
  </head>

  <body>
    <section>
      <a id="top"></a>
      <h1>Writing portable Scheme programs</h1>
      <a href="/scheme"><small>← Back up</small></a>
      <p>
        Scheme, due to its minimalistic nature, has a deeply
        fragmented ecosystem. This means that any non-trivial program
        ultimately needs to depend on implementation-specific
        features. This page simply explains a few methods a Scheme
        hacker can rely on for writing portable Scheme programs,
        scripts and libraries.
      </p>

      <h2>Standard-conformant code</h2>
      <p>
        As far as Scheme standards go, you have three choices:
        R5RS, R6RS and R7RS.
        (See the <a href="/scheme/bibliography#standards">Bibliography</a>
        for links to the standards.)
      </p>
      <h3>R5RS</h3>
      <p>
        
      </p>
      <h4>Relying on SLIB</h4>
      <p>
        
      </p>
      <h3>R6RS</h3>
      <p>
        
      </p>
      <h3>R7RS</h3>
      <p>
        
      </p>

      <h2>SRFI implementations as libraries</h2>
      <p>
        
      </p>

      <h2><code>cond-expand</code> for platform-specific code</h2>
      <p>
	<a href="SRFI-0">https://srfi.schemers.org/srfi-0/srfi-0.html</a>
	is the first <a href="SRFI">https://srfi.schemers.org/</a>,
	describing a simple macro <code>cond-expand</code> that expands
	code at macro expansion time, based on symbols/keywords that
	stand for features the implementation chooses to provide as a
	guarantee of portability, (not unlike Common Lisp's <code>#+</code>
	read macro).
        <br/>
        Consider the following (overly simplistic) example;
      </p>
<code>;;; We need SRFI-1.
<span class="paren-0">(</span>cond-expand
 <span class="paren-1">(</span>srfi-1<span class="paren-1">)</span> ; We already have it!
 <span class="paren-1">(</span><span class="paren-2">(</span>or gauche chicken-3 chicken-4<span class="paren-2">)</span>
  <span class="paren-2">(</span>use srfi-1<span class="paren-2">)</span><span class="paren-1">)</span>
 <span class="paren-1">(</span>chicken-5
  <span class="paren-2">(</span>import srfi-1<span class="paren-2">)</span><span class="paren-1">)</span>
 <span class="paren-1">(</span>guile
  <span class="paren-2">(</span>use-modules <span class="paren-3">(</span>srfi srfi-1<span class="paren-3">)</span><span class="paren-2">)</span><span class="paren-1">)</span>
 <span class="paren-1">(</span>chibi
  <span class="paren-2">(</span>import <span class="paren-3">(</span>srfi 1<span class="paren-3">)</span><span class="paren-2">)</span><span class="paren-1">)</span>
 <span class="paren-1">(</span>else
  <span class="paren-2">(</span>display "SRFI-1 could not be loaded."<span class="paren-2">)</span>
  <span class="paren-2">(</span>newline<span class="paren-2">)</span>
  <span class="paren-2">(</span>exit<span class="paren-2">)</span><span class="paren-1">)</span><span class="paren-0">)</span>
<span class="paren-0">(</span>display "SRFI-1 successfully loaded."<span class="paren-0">)</span>
<span class="paren-0">(</span>newline<span class="paren-0">)</span>
</code>

      <h2>Appendix A: SRFI support matrix</h2>
      <table>
      </table>

      <h2>Appendix B: <code>cond-expand</code> features across implementations</h2>
      <table>
      </table>
    </section>

    <footer>
      <a href="#top"><small>↑ Back to top</small></a>
      <p>
        <small>
          <b>Last updated:</b> <time>2020-03-22</time>
          <br/>
          Kindly hosted by
          <a href="https://pages.github.com">
            GitHub Pages</a>.
        </small>
        <br/>
        <a href="https://erkin.party/emacs/">
          <img src="/images/emacs/made0.png"
               title="Powered by GNU Emacs, everyone's favourite thermonuclear editor!"
               alt="Made with GNU Emacs"/>
        </a>
      </p>
    </footer>
  </body>
</html>

<!--
    Local Variables:
    mode: html
    coding: utf-8-unix
    indent-tabs-mode: nil
    End:
  -->
